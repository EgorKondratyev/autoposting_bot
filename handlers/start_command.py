import random

from aiogram.types import Message

from create_bot.bot import dp
from databases.client import UsersDB
from keyboards.inline.start_command import create_start_menu


# @dp.message_handler(commands='start')
async def start_command(message: Message):
    smiles = ['üíé', 'ü¶†', '‚òÉÔ∏è', '‚≠êÔ∏è']
    start_text = f'<b>–ü—Ä–∏–≤–µ—Ç</b>{random.choice(smiles)}\n\n' \
                 f'<i>–≠—Ç–æ –±–æ—Ç –ø–æ–º–æ—â–Ω–∏–∫, –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –ø–æ—Å—Ç—ã —Å –∑–∞–¥–∞–Ω–Ω—ã–º –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º!</i>\n\n'

    users_db = UsersDB()
    if not users_db.exists_user(message.from_user.id):
        users_db.add_user(user_id=message.from_user.id)
        start_text += '–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏–π —Å–ø—Ä–∞–≤–æ—á–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ "/help"'
    await message.answer(start_text,
                         reply_markup=create_start_menu, parse_mode='html')


# @dp.message_handler(commands='help')
async def help_command(message: Message):
    help_text = f'–¢—ã –Ω–∞—Ö–æ–¥–∏—à—å—Å—è –≤ –º–µ–Ω—é –∫–æ–º–∞–Ω–¥—ã "/help"!\n\n' \
                f'1. "–î–æ–±–∞–≤–∏—Ç—å –∫–∞–Ω–∞–ª" - –¥–∞–Ω–Ω–∞—è –∫–Ω–æ–ø–∫–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –∫–∞–Ω–∞–ª, –≤ –∫–æ—Ç–æ—Ä—ã–π –±–æ—Ç —Å–º–æ–∂–µ—Ç –ø–æ—Å—Ç–∏—Ç—å ' \
                f'–ø–æ—Å—Ç—ã —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º, –∫–æ—Ç–æ—Ä—ã–π —Å–∞–º –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—à—å. –í–Ω–∏–º–∞–Ω–∏–µ! –ë–æ—Ç –æ–±—è–∑–∞–Ω –±—ã—Ç—å –∞–¥–º–∏–Ω–æ–º –≤ ' \
                f'–¥–∞–Ω–Ω–æ–º –∫–∞–Ω–∞–ª–µ, –¥–∞–±—ã –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞—Ç—å. –ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–±–ª—é–¥–∞—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –≤–≤–æ–¥–∞ ' \
                f'ID –∫–∞–Ω–∞–ª–∞\n' \
                f'–°–∏–Ω—Ç–∞–∫—Å–∏—Å: -100ID | –ü—Ä–∏–º–µ—Ä: -1001822001648\n' \
                f'–ü–æ–ª—É—á–∏—Ç—å ID –∫–∞–Ω–∞–ª–∞ –º–æ–∂–Ω–æ –ø—Ä–∏ –ø–æ–º–æ—â–∏ –±–æ—Ç–∞-–ø–æ–º–æ—â–Ω–∏–∫–∞ @getmyid_bot. –ü–æ–ª—É—á–µ–Ω–∏–µ ID –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—É—Ç–µ–º ' \
                f'–ø–µ—Ä–µ—Å—ã–ª–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ –∫–∞–Ω–∞–ª–∞ –≤ –±–æ—Ç–∞ @getmyid_bot, –Ω–∞ —á—Ç–æ –±–æ—Ç –≤—ã—à–ª–µ—Ç —Ç–µ–±–µ ID –∫–∞–Ω–∞–ª–∞, –ø–æ–ª—É—á–µ–Ω–Ω—ã–π ' \
                f'ID –±—É–¥–µ—Ç –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å -100\n\n' \
                f'2. "–£–¥–∞–ª–∏—Ç—å –∫–∞–Ω–∞–ª" - –¥–∞–Ω–Ω–∞—è –∫–Ω–æ–ø–∫–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–¥–∞–ª–∏—Ç—å –∫–∞–Ω–∞–ª, –∫–æ—Ç–æ—Ä—ã–π –±—ã–ª –¥–æ–±–∞–≤–ª–µ–Ω —Ä–∞–Ω–µ–µ –ø—Ä–∏ –ø–æ–º–æ—â–∏ ' \
                f'–∫–æ–º–∞–Ω–¥—ã "–î–æ–±–∞–≤–∏—Ç—å –∫–∞–Ω–∞–ª". –ê–Ω—Ç–æ–Ω–∏–º –∫–æ–º–∞–Ω–¥—ã "–î–æ–±–∞–≤–∏—Ç—å –∫–∞–Ω–∞–ª"\n' \
                f'–ß—Ç–æ–±—ã —É–¥–∞–ª–∏—Ç—å –∫–∞–Ω–∞–ª –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –Ω–∞–∂–∞—Ç—å –Ω–∞ –¥–∞–Ω–Ω—É—é –∫–Ω–æ–ø–∫—É –∏ –≤–≤–µ—Å—Ç–∏ ID –∫–∞–Ω–∞–ª–∞. –í—Å–µ ID –∫–∞–Ω–∞–ª–æ–≤ –±—É–¥—É—Ç ' \
                f'–æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É "–£–¥–∞–ª–∏—Ç—å –∫–∞–Ω–∞–ª"\n\n' \
                f'3. "–°–æ–∑–¥–∞—Ç—å –ø–æ—Å—Ç" - –¥–∞–Ω–Ω–∞—è –∫–Ω–æ–ø–∫–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –ø–æ—Å—Ç, –∫–æ—Ç–æ—Ä—ã–π –≤–ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏–∏, ' \
                f'—Å —É–∫–∞–∑–∞–Ω–Ω—ã–º —Ç–æ–±–æ—é –≤—Ä–µ–º–µ–Ω–µ–º, –±—É–¥–µ—Ç –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω –≤ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–π –¥–ª—è —Ç–µ–±—è –∫–∞–Ω–∞–ª.\n' \
                f'–¢–∞–∫–∂–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ—Å—Ç –∏–∑ –∫–∞–Ω–∞–ª–∞ –¥–æ–Ω–æ—Ä–∞, –ø–µ—Ä–µ—Å–ª–∞–≤ –µ–≥–æ –≤ –±–æ—Ç–∞, –ø–æ—Å–ª–µ —É–∫–∞–∑–∞–Ω–∏—è –∫–∞–Ω–∞–ª–∞ –∏ –≤—Ä–µ–º–µ–Ω–∏ ' \
                f'–ø—É–±–ª–∏–∫–∞—Ü–∏–∏.\n\n' \
                f'4. "–ü–æ—Å—Ç—ã –∏–∑ –¥–æ–Ω–æ—Ä–∞" - –¥–∞–Ω–Ω–∞—è –∫–Ω–æ–ø–∫–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ—Å—Ç–∞–≤–∏—Ç—å –≤ –æ—á–µ—Ä–µ–¥—å –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ ' \
                f'–ø–æ—Å—Ç–æ–≤ –∏–∑ –∫–∞–Ω–∞–ª–∞ –¥–æ–Ω–æ—Ä–∞ (–ü—Ä–∏–º–µ—Ä: —Ç—ã –±–µ—Ä—ë—à—å –∏–∑ –∫–∞–Ω–∞–ª–∞ @big 100 –ø–æ—Å—Ç–æ–≤ –∏ –ø–µ—Ä–µ—Å—ã–ª–∞–µ—à—å –∏—Ö –≤ –±–æ—Ç–∞, –∞ ' \
                f'–±–æ—Ç –≤ —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å –≤—ã—Å—Ç–∞–≤–ª—è–µ—Ç –≤—Å–µ —ç—Ç–∏ –ø–æ—Å—Ç—ã –≤ –æ—á–µ—Ä–µ–¥—å)\n' \
                f'–í —ç—Ç–æ–π –∫–Ω–æ–ø–∫–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª –∏ —Ç–∏–ø –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞, —Å –∫–æ—Ç–æ—Ä—ã–º –±—É–¥–µ—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å ' \
                f'–ø–æ—Å—Ç–∏–Ω–≥ –≤ –Ω—É–∂–Ω—ã–π —Ç–µ–±–µ –∫–∞–Ω–∞–ª\n' \
                f'–¢–∏–ø –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞: "–∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É", "–∫–∞–∂–¥—ã–π —á–∞—Å", "–∫–∞–∂–¥—ã–π –¥–µ–Ω—å"\n' \
                f'–ò–Ω—Ç–µ—Ä–≤–∞–ª (–≤—ã–±–∏—Ä–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ —Ç–∏–ø–∞ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞): "–ö–∞–∂–¥—ã–µ 15 –º–∏–Ω—É—Ç", "–†–∞–∑ –≤ 2 –¥–Ω—è (–ö–∞–∂–¥—ã–µ 2 –¥–Ω—è)",' \
                f' "–ö–∞–∂–¥—ã–µ 2 —á–∞—Å–∞ (—Ä–∞–∑ –≤ 2 —á–∞—Å–∞)"\n\n' \
                f'5. "–û—Ç–º–µ–Ω–∞ –ø–æ—Å—Ç–æ–≤" - –¥–∞–Ω–Ω–∞—è –∫–Ω–æ–ø–∫–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç–º–µ–Ω–∏—Ç—å –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –ø–æ—Å—Ç ' \
                f'(–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –ø–æ—Å—Ç - —ç—Ç–æ —Ç–æ—Ç –ø–æ—Å—Ç, –∫–æ—Ç–æ—Ä—ã–π —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω –ø—Ä–∏ –ø–æ–º–æ—â–∏ –∫–Ω–æ–ø–∫–∏ "–°–æ–∑–¥–∞—Ç—å –ø–æ—Å—Ç"). –ê —Ç–∞–∫–∂–µ ' \
                f'–ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–æ–ª-–≤–æ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –ø–æ—Å—Ç–æ–≤ –∏ —Ç–µ–∫—Å—Ç –ø–æ—Å—Ç–∞'
    await message.answer(help_text)


def register_start_command_handlers():
    dp.register_message_handler(start_command, commands='start')
    dp.register_message_handler(help_command, commands='help')

